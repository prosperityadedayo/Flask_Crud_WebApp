from flask import Flask, render_template, request, redirect
import mysql.connector

app = Flask(__name__)

# Database connection
def get_db_connection():
    return mysql.connector.connect(
        host="localhost",
        user="root",
        password="",
        database="flask_crud_db"
    )

@app.route('/')
def dashboard():
    return render_template('dashboard.html')  # Your dashboard

@app.route('/create')
def create_form():
    return render_template('create.html')  # Form to add utensil

@app.route('/add', methods=['POST'])
def add_utensil():
    Item_name = request.form['Item name']
    Material = request.form['Material']
    Quantity = request.form['Quantity']
    Sale = request.form['Sale Price']
    Purchase = request.form['Purchase Price']

    conn = get_db_connection()
    cursor = conn.cursor()
    
    sql = "INSERT INTO utensils (name, material, quantity, sale_price, purchase_price) VALUES (%s, %s, %s, %s, %s)"
    values = (Item_name, Material, Quantity, Sale, Purchase)

    cursor.execute(sql, values)
    conn.commit()

    cursor.close()
    conn.close()

    return redirect('/')

if __name__ == '__main__':
    app.run(debug=True)
